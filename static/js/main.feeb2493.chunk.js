(this["webpackJsonpreact_redux-airport"]=this["webpackJsonpreact_redux-airport"]||[]).push([[0],{147:function(e,t,a){"use strict";a.r(t);var r,n=a(0),c=a.n(n),i=a(21),l=a.n(i),u=(a(82),a(19)),o=a(22),s=function(e){var t=e.children,a=Object(u.g)(),r=new URLSearchParams(a.search),n=r.get("date")||"",i=r.get("query")||"";return c.a.createElement(o.b,{className:"flights-tabs__tab",activeClassName:"flights-tabs__tab_active",isActive:function(){return!!a.pathname.includes(t)},to:"/react_redux-airport/".concat(t).concat(n||i?"?".concat(r.toString()):"")},t)},d=function(){return c.a.createElement("div",{className:"flights-tabs"},c.a.createElement(s,null,"departures"),c.a.createElement(s,null,"arrivals"))},f=a(27),m=a(28),h=a(70),p=a(37);!function(e){e.REQUESTING_DATA="REQUESTING_DATA",e.RECEIVED_DATA="RECEIVED_DATA",e.SET_FILTERED_QUERY="SET_FILTERED_QUERY"}(r||(r={}));var E={filteredQuery:""},D={flights:{arrival:[],departure:[]},direction:"",fetching:!1},g=a(18),v=Object(g.combineReducers)({fetchData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.REQUESTING_DATA:return Object(p.a)({},e,{fetching:!0});case r.RECEIVED_DATA:var a=t.flights,n=t.direction,c=t.date,i="arrival"===n,l=new Date(c).getDate();return Object(p.a)({},e,{flights:{arrival:Object(m.a)(a.body.arrival).filter((function(e){var t=new Date(e.timeToStand).getDate();return l===t})).sort((function(e,t){return Date.parse(e.timeToStand)-Date.parse(t.timeToStand)})),departure:Object(m.a)(a.body.departure).filter((function(e){var t=new Date(e.timeDepExpectCalc).getDate();return l===t})).sort((function(e,t){return Date.parse(e.timeDepExpectCalc)-Date.parse(t.timeDepExpectCalc)}))},direction:i?"arrival":"departure",fetching:!1});default:return e}},sortReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SET_FILTERED_QUERY:return Object(p.a)({},e,{filteredQuery:t.filteredQuery});default:return e}}}),_=function(e){return function(e){return e.fetching}(e.fetchData)},b=Object(h.a)([function(e){return function(e){return e.flights}(e.fetchData)},function(e){return function(e){return e.direction}(e.fetchData)},function(e){return function(e){return e.filteredQuery}(e.sortReducer)}],(function(e,t,a){var r=new RegExp(a,"i");return"departure"===t?Object(m.a)(e.departure.filter((function(e){return r.test(e.codeShareData[0].codeShare)||r.test(e["airportToID.city_en"])||r.test(e.airline.en.name)}))):"arrival"===t?Object(m.a)(e.arrival.filter((function(e){return r.test(e.codeShareData[0].codeShare)||r.test(e["airportFromID.city_en"])||r.test(e.airline.en.name)}))):[]})),y=a(20),S=a.n(y),j=a(36),T=function(){var e=Object(j.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(j.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T("".concat("https://api.iev.aero/api/flights/").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(e,t,a){return{type:r.RECEIVED_DATA,flights:e,direction:t,date:a}},w=a(31),N=a.n(w),I=function(e){var t=e.flight;var a="",r="",n=t.term,i=t.status,l=t.airline,u=t.codeShareData,o=t.actual,s=function(e){return new Date(e).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})};!function(e){return void 0!==e.timeLandCalc}(t)?(a=t.timeDepExpectCalc,r=t["airportToID.city_en"],o=t.timeTakeofFact?s(t.timeTakeofFact):"","DV"===(i="DP"===i?"Departed at":i)&&(i="Route change",o="")):(a=t.timeToStand,r=t["airportFromID.city_en"],"LN"===i?(o=s(t.actual),i="Landed"):o=""),i="FR"===(i="ON"===(i="CK"===(i="BD"===(i="CX"===i?"Cancelled":i)?"Boarding":i)?"Check-in":i)?"On time":i)?"In flight":i;var d=s(a);return c.a.createElement("tr",null,c.a.createElement("td",{className:N()("flights-table__terminal-col",{blue:"D"===n})},c.a.createElement("span",null,n)),c.a.createElement("td",null,d),c.a.createElement("td",null,r),c.a.createElement("td",null,"".concat(i," ").concat(o)),c.a.createElement("td",null,l.en.name),c.a.createElement("td",null,u[0].codeShare))},A=Object(f.b)((function(e){return{flights:b(e),fetching:_(e)}}),{loadData:function(e,t){return function(){var a=Object(j.a)(S.a.mark((function a(n){var c;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:r.REQUESTING_DATA}),a.next=3,O(e);case 3:c=a.sent,n(R(c,t,e));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.flights,a=e.fetching,r=e.loadData,i=Object(u.g)(),l=i.pathname.includes("arrivals")?"arrival":"departure",o=new URLSearchParams(i.search),s=(new Date).toLocaleDateString().split(".").join("-"),d=(o.get("date")||s).split("-").reverse().join("-");Object(n.useEffect)((function(){console.log("reload data from:",l,", date:",d),r(d,l)}),[l,d]);var f=["Terminal","Local time","Destination","Status","Airline","Flight"].map((function(e,t){return c.a.createElement("th",{key:t},e)}));return 0!==t.length?c.a.createElement("table",{className:"flights-table"},c.a.createElement("thead",null,c.a.createElement("tr",null,f)),c.a.createElement("tbody",null,t.map((function(e){return c.a.createElement(I,{key:e.ID,flight:e})})))):c.a.createElement("div",{className:"nothing-found"},a?c.a.createElement("span",null,"Loading"):c.a.createElement("span",null,"No flights"))})),L=a(45),x=function(e){var t=e.setDateParams,a=e.calendarDate,r=e.date,n=e.children,i=e.selectedDate.toLocaleDateString()===r.toLocaleDateString();return c.a.createElement("div",{className:N()("flights-dates__day",{"flights-dates__day_active":i}),onClick:function(){return t(r)}},c.a.createElement("span",null,a(r)),n)},C=a(71),Q=a.n(C);a(89);function k(e){return e?new Date(e.split("-").reverse().join("-")):new Date}function F(e){return e.toLocaleDateString().split(".").join("-")}function U(e){return e.toLocaleDateString([],{month:"numeric",day:"numeric"}).replace(".","/")}var P=function(){var e=Object(u.g)(),t=Object(u.f)(),a=new URLSearchParams(e.search),r=Object(n.useState)(k(a.get("date"))),i=Object(L.a)(r,2),l=i[0],o=i[1],s=function(e){o(k(F(e)))},d=function(e){var t=new Date;return t.setDate(t.getDate()+e),t};return Object(n.useEffect)((function(){var e=F(l);a.set("date",e),t.push({search:a.toString()})}),[l]),console.log(l),c.a.createElement("div",{className:"flights-dates__container"},c.a.createElement(Q.a,{selected:l,onChange:function(e){return o(e)},customInput:c.a.createElement("div",{className:"flights-calendar__container"},c.a.createElement("div",{className:"flights-calendar__datepicker"},c.a.createElement("input",{type:"text",readOnly:!0,className:"flights-calendar__input",value:U(l)})))}),c.a.createElement("div",{className:"flights-dates__list"},c.a.createElement(x,{selectedDate:l,calendarDate:U,setDateParams:s,date:d(-1)},"Yesterday"),c.a.createElement(x,{selectedDate:l,calendarDate:U,setDateParams:s,date:d(0)},"Today"),c.a.createElement(x,{selectedDate:l,calendarDate:U,setDateParams:s,date:d(1)},"Tomorrow")))},G=Object(f.b)(null,{setFilteredQuery:function(e){return{type:r.SET_FILTERED_QUERY,filteredQuery:e}}})((function(e){var t=e.setFilteredQuery,a=Object(u.f)(),r=Object(u.g)(),i=new URLSearchParams(r.search),l=i.get("query")||"";Object(n.useEffect)((function(){t(l)}),[l]);var o=Object(n.useState)(l),s=Object(L.a)(o,2),d=s[0],f=s[1];return c.a.createElement("div",{className:"flights__search-field search-field"},c.a.createElement("h2",{className:"search-field__title"},"SEARCH FLIGHT"),c.a.createElement("div",{className:"search-field__search-line"},c.a.createElement("input",{className:"search-field__input",type:"text",placeholder:"Airline, destination or flight #",value:d,onChange:function(e){var t=e.target.value;f(t)}}),c.a.createElement("button",{className:"search-field__button",onClick:function(){var e;(e=d)?i.set("query",e):i.delete("query"),a.push({search:i.toString()})}},"Search")))})),V=function(){return c.a.createElement("div",{className:"flights__container"},c.a.createElement(G,null),c.a.createElement(d,null),c.a.createElement(P,null),c.a.createElement(A,null))},Y=a(75),q=a(76),B=Object(g.createStore)(v,Object(q.composeWithDevTools)(Object(g.applyMiddleware)(Y.a)));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(o.a,null,c.a.createElement(f.a,{store:B},c.a.createElement(u.c,null,c.a.createElement(u.a,{path:"/react_redux-airport/arrivals",component:V}),c.a.createElement(u.a,{path:"/react_redux-airport/departures",component:V}))))),document.getElementById("root"))},77:function(e,t,a){e.exports=a(147)},82:function(e,t,a){}},[[77,1,2]]]);
//# sourceMappingURL=main.feeb2493.chunk.js.map