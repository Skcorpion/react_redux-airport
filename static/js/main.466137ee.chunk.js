(this["webpackJsonpreact_redux-airport"]=this["webpackJsonpreact_redux-airport"]||[]).push([[0],{154:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),i=a(15),l=a.n(i),u=a(32);!function(e){e.ARRIVAL="arrival",e.DEPARTURE="departure"}(n||(n={}));var s,o=a(70),f=a(11);!function(e){e.REQUESTING_FLIGHTS="REQUESTING_FLIGHTS",e.REQUESTING_FLIGHT="REQUESTING_FLIGHT",e.RECEIVED_FLIGHTS="RECEIVED_FLIGHTS",e.RECEIVED_FLIGHT="RECEIVED_FLIGHT",e.UNMOUNT_FLIGHT="UNMOUNT_FLIGHT",e.SET_FILTERED_QUERY="SET_FILTERED_QUERY"}(s||(s={}));var m={filteredQuery:""},d={flights:{arrival:[],departure:[]},direction:null,fetching:!1},h={flight:null,fetching:!1},E=a(23),g=Object(E.combineReducers)({fetchFlights:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.REQUESTING_FLIGHTS:return Object(f.a)({},e,{fetching:!0});case s.RECEIVED_FLIGHTS:var a=t.flights,n=t.direction,r=t.date,c=r.split("-").reverse().join("-"),i=new Date(c).getDate();return Object(f.a)({},e,{flights:{arrival:Object(u.a)(a.body.arrival).filter((function(e){var t=new Date(e.timeToStand).getDate();return i===t})).sort((function(e,t){return Date.parse(e.timeToStand)-Date.parse(t.timeToStand)})),departure:Object(u.a)(a.body.departure).filter((function(e){var t=new Date(e.timeDepExpectCalc).getDate();return i===t})).sort((function(e,t){return Date.parse(e.timeDepExpectCalc)-Date.parse(t.timeDepExpectCalc)}))},direction:n,fetching:!1});default:return e}},sortReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.SET_FILTERED_QUERY:return Object(f.a)({},e,{filteredQuery:t.filteredQuery});default:return e}},fetchFlight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.REQUESTING_FLIGHT:return Object(f.a)({},e,{fetching:!0});case s.RECEIVED_FLIGHT:var a=t.flight;return Object(f.a)({},e,{flight:Object(f.a)({},a.body),fetching:!1});case s.UNMOUNT_FLIGHT:return Object(f.a)({},e,{flight:null});default:return e}}}),p=function(e){return function(e){return e.fetching}(e.fetchFlights)},v=function(e){return function(e){return e.flight}(e.fetchFlight)},_=function(e){return function(e){return e.fetching}(e.fetchFlight)},b=Object(o.a)([function(e){return function(e){return e.flights}(e.fetchFlights)},function(e){return function(e){return e.direction}(e.fetchFlights)},function(e){return function(e){return e.filteredQuery}(e.sortReducer)}],(function(e,t,a){var r=new RegExp(a,"i");return t===n.DEPARTURE?Object(u.a)(e.departure.filter((function(e){return r.test(e.codeShareData[0].codeShare)||r.test(e["airportToID.city_en"])||r.test(e.airline.en.name)}))):t===n.ARRIVAL?Object(u.a)(e.arrival.filter((function(e){return r.test(e.codeShareData[0].codeShare)||r.test(e["airportFromID.city_en"])||r.test(e.airline.en.name)}))):[]})),D=a(24),N=a(72),T=a(73),I=a(10),S=(a(88),a(25)),O=function(e){var t=e.direction,a=e.children,n=Object(S.g)(),r=new URLSearchParams(n.search),i=r.get("date")||"",l=r.get("query")||"";return c.a.createElement(I.b,{className:"direction-tabs__tab",activeClassName:"direction-tabs__tab_active",isActive:function(){return!!n.pathname.includes(t)},to:"/".concat(t).concat(i||l?"?".concat(r.toString()):"")},a)},j=a(30),F=a(9),y=a.n(F),R=a(22),L="https://api.iev.aero/api/flights/",w=function(){var e=Object(R.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(R.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w("".concat(L).concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(R.a)(y.a.mark((function e(t,a){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w("".concat(L).concat(t,"/").concat(a)));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),x=function(e,t,a){return{type:s.RECEIVED_FLIGHTS,flights:e,direction:t,date:a}},C=function(e){return{type:s.RECEIVED_FLIGHT,flight:e}},H=function(e){return{type:s.SET_FILTERED_QUERY,filteredQuery:e}},k=(a(91),Object(D.b)(null,{setFilteredQuery:function(e){return function(){var t=Object(R.a)(y.a.mark((function t(a){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a(H(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.setFilteredQuery,a=e.children,n=Object(S.f)(),i=Object(S.h)(),l=i.direction||"departures",u=Object(S.g)(),s=new URLSearchParams(u.search),o=s.get("query")||"";Object(r.useEffect)((function(){t(o)}),[o]);var f=Object(r.useState)(o),m=Object(j.a)(f,2),d=m[0],h=m[1],E=function(){var e;e=d,(i.direction||e)&&(e?s.set("query",e):s.delete("query"),n.push({pathname:l,search:s.toString()}))};return c.a.createElement("div",{className:"flights__search-field search-field"},c.a.createElement("h2",{className:"search-field__title"},"SEARCH FLIGHT"),c.a.createElement("div",{className:"search-field__search-line"},c.a.createElement("input",{className:"search-field__input",type:"text",placeholder:"Airline, destination or flight \u2116",value:d,onChange:function(e){var t=e.target.value;h(t)},onKeyDown:function(e){"Enter"===e.key&&E()}}),c.a.createElement("button",{className:"search-field__button",onClick:E},"Search")),a)}))),Q=(a(92),function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"bg"}),c.a.createElement("div",{className:"home"},c.a.createElement("div",{className:"container home__container"},c.a.createElement(k,null,c.a.createElement("div",{className:"home__direction-tabs direction-tabs"},c.a.createElement(O,{direction:"departures"},"all departures"),c.a.createElement(O,{direction:"arrivals"},"all arrivals"))))))}),A=(a(93),function(){return c.a.createElement("div",{className:"flights__direction-tabs direction-tabs"},c.a.createElement(O,{direction:"departures"},"departures"),c.a.createElement(O,{direction:"arrivals"},"arrivals"))}),P=a(35),V=a.n(P);function B(e){return e?new Date(e.split("-").reverse().join("-")):new Date}function M(e){return e.toLocaleDateString("en-GB").split("/").join("-")}function Y(e){return new Date(e).toLocaleTimeString("en-GB",{hour:"numeric",minute:"2-digit"})}var q=function(e){switch(e){case"ON":return"On time";case"CX":return"Canceled";case"LN":return"Landed";case"CK":return"Check-in";case"FR":return"In flight";case"BD":return"Boarding";case"DP":return"Departed";case"DV":return"Route change";case"GC":return"Gate closed";default:return e}};function J(e){var t=e.status,a=e.actual,n="",r="",c="",i=void 0,l=void 0;return K(e)?(n=e.timeToStand,c=e["airportFromID.city_en"],"LN"===t&&(r=Y(a))):(n=e.timeDepExpectCalc,c=e["airportToID.city_en"],i=e.checkinNo,l=e.gateNo,e.timeTakeofFact&&"DP"===t&&(r=Y(e.timeTakeofFact))),{localTime:n,actualTime:r,destination:c,stand:i,gate:l}}function K(e){return void 0!==e.timeLandCalc}var W=function(e){var t=e.flightId,a=Object(S.g)(),n=a.pathname,r=new URLSearchParams(a.search),i=M(new Date),l=r.get("date")||i;return c.a.createElement(I.b,{to:"".concat(n,"/").concat(t,"?dt=").concat(l)},"Flight Details")},X=c.a.memo((function(e){var t=e.flight,a=t.term,n=t.status,r=t.codeShareData,i=t.airline,l=Object(f.a)({},J(t)),u=l.localTime,s=l.actualTime,o=l.destination,m=Y(u);return c.a.createElement(c.a.Fragment,null,c.a.createElement("td",{className:V()("flights-table__terminal-col",{blue:"D"===a})},c.a.createElement("span",null,a)),c.a.createElement("td",{className:"flights-table__local-time"},m),c.a.createElement("td",{className:"flights-table__destination-col"},o),c.a.createElement("td",{className:"flights-table__status-col"},"".concat(q(n)," ").concat(s)),c.a.createElement("td",{className:"flights-table__airline-col"},c.a.createElement("img",{src:i.en.logoSmallName,alt:i.en.name}),c.a.createElement("span",null,i.en.name)),c.a.createElement("td",{className:"flights-table__flight-col"},r[0].codeShare),c.a.createElement("td",{className:"flights-table__details-field"},c.a.createElement(W,{flightId:t.ID})))})),z=(a(94),a(164)),Z=a(163),$=Object(D.b)((function(e){return{flights:b(e),fetching:p(e)}}),{loadFlights:function(e,t){return function(){var a=Object(R.a)(y.a.mark((function a(n){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:s.REQUESTING_FLIGHTS}),a.next=3,G(e);case 3:r=a.sent,n(x(r,t,e));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.flights,a=e.fetching,i=e.loadFlights,l=Object(S.g)(),u=Object(S.h)(),s="arrivals"===u.direction?n.ARRIVAL:"departures"===u.direction?n.DEPARTURE:null,o=new URLSearchParams(l.search),f=M(new Date),m=o.get("date")||f;Object(r.useEffect)((function(){i(m,s)}),[s,m]);var d=["Terminal","Local time","Destination","Status","Airline","Flight"].map((function(e,t){return c.a.createElement("th",{key:t},e)}));return 0!==t.length?c.a.createElement("table",{className:"flights-table"},c.a.createElement("thead",null,c.a.createElement("tr",null,d)),c.a.createElement(z.a,{component:"tbody"},t.map((function(e){return c.a.createElement(Z.a,{key:e.ID,classNames:"list",timeout:{enter:200,exit:500}},c.a.createElement("tr",null,c.a.createElement(X,{flight:e})))})))):c.a.createElement("div",{className:"nothing-found"},a?c.a.createElement("span",null,"Loading..."):c.a.createElement("span",null,"No flights"))})),ee=c.a.memo((function(e){var t=e.setSelectedDate,a=e.calendarDate,n=e.date,r=e.children,i=e.isActive;return c.a.createElement("div",{className:V()("flights-dates__day",{"flights-dates__day_active":i}),onClick:function(){return t(n)}},c.a.createElement("span",null,a(n)),r)})),te=a(74),ae=a.n(te),ne=(a(95),a(96),function(e){return B(e).toLocaleDateString("en-GB",{month:"numeric",day:"numeric"})});function re(e){var t=new Date;return t.setDate(t.getDate()+e),M(t)}var ce=function(){var e=Object(S.g)(),t=Object(S.f)(),a=new URLSearchParams(e.search),n=M(new Date),i=a.get("date")||n,l=Object(r.useState)(i),u=Object(j.a)(l,2),s=u[0],o=u[1];return Object(r.useEffect)((function(){o(i)}),[i]),Object(r.useEffect)((function(){s===n?a.delete("date"):a.set("date",s),t.push({search:a.toString()})}),[s]),c.a.createElement("div",{className:"flights-dates__container"},c.a.createElement(ae.a,{selected:B(s),onChange:function(e){return o(M(e))},customInput:c.a.createElement("div",{className:"flights-calendar__container"},c.a.createElement("div",{className:"flights-calendar__datepicker"},c.a.createElement("input",{type:"text",readOnly:!0,className:"flights-calendar__input",value:ne(s)})))}),c.a.createElement("div",{className:"flights-dates__list"},c.a.createElement(ee,{setSelectedDate:o,date:re(-1),isActive:re(-1)===s,calendarDate:ne},"Yesterday"),c.a.createElement(ee,{setSelectedDate:o,date:re(0),isActive:re(0)===s,calendarDate:ne},"Today"),c.a.createElement(ee,{setSelectedDate:o,date:re(1),isActive:re(1)===s,calendarDate:ne},"Tomorrow")))},ie=function(){return c.a.createElement("div",{className:"container flights__container"},c.a.createElement(k,null),c.a.createElement(A,null),c.a.createElement(ce,null),c.a.createElement($,null))},le=(a(154),Object(D.b)((function(e){return{flight:v(e),fetching:_(e)}}),{loadFlight:function(e,t){return function(){var a=Object(R.a)(y.a.mark((function a(n){var r;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:s.REQUESTING_FLIGHT}),a.next=3,U(e,t);case 3:r=a.sent,n(C(r));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},unmountFlight:function(){return{type:s.UNMOUNT_FLIGHT}}})((function(e){var t=e.flight,a=e.fetching,n=e.loadFlight,i=e.unmountFlight,l=Object(S.g)(),u=Object(S.h)(),s=u.direction,o=u.flightId,m=new URLSearchParams(l.search).get("dt")||"";if(Object(r.useEffect)((function(){return n(m,o),function(){i()}}),[m,o]),t&&!a){var d=t.term,h=t.status,E=t.codeShareData,g=Object(f.a)({},J(t)),p=g.localTime,v=g.actualTime,_=g.destination,b=g.stand,D=g.gate,N=m.split("-").slice(0,2).join("."),T=m.split("-").join("."),O=Y(p),F=E[0].codeShare,y="".concat(q(h)).concat(v?"".concat("DP"===h?" at":""," ").concat(v,", ").concat(T):""),R={Date:N,Time:O,Terminal:d,Flight:F,Gate:D,Stand:b},L=Object.entries(R).map((function(e){var t=Object(j.a)(e,2);return{header:t[0],value:t[1]}})).filter((function(e){return e.value}));return c.a.createElement("div",{className:"container flight__container"},c.a.createElement("div",{className:"flight__back-button"},c.a.createElement(I.b,{to:"/".concat(s,"?date=").concat(m)},"Back")),c.a.createElement("div",{className:"flight__info-details"},c.a.createElement("div",{className:"flight__flight-number"},c.a.createElement("b",null,F)," flies ",K(t)?"from":"in"),c.a.createElement("div",{className:"flight__city-name"},_),c.a.createElement("div",{className:"flight__title"},"Flight information:"),c.a.createElement("div",{className:"flight__details"},c.a.createElement("ul",null,L.map((function(e){var t=e.header,a=e.value;return c.a.createElement("li",{key:t},c.a.createElement("p",{className:"flight__details-label"},t),c.a.createElement("p",{className:"flight__details-value"},c.a.createElement("b",null,a)))})))),c.a.createElement("div",{className:"flight__status"},y)))}return c.a.createElement("div",{className:"flight__nothing-found nothing-found"},c.a.createElement("span",null,"Loading..."))}))),ue=(a(155),function(){return c.a.createElement("header",{className:"header"},c.a.createElement(I.b,{to:"/"},c.a.createElement("h1",null,"Home")))}),se=(a(156),function(){return c.a.createElement("footer",{className:"footer"},c.a.createElement("img",{alt:"",src:"./img/icons8-redux.svg"}),c.a.createElement("span",null,"Redux 2020"))}),oe=function(){return c.a.createElement("div",{className:"wrapper"},c.a.createElement(ue,null),c.a.createElement("div",{className:"wrapper-container"},c.a.createElement(S.c,null,c.a.createElement(S.a,{exact:!0,path:"/",component:Q}),c.a.createElement(S.a,{exact:!0,path:"/:direction",component:ie}),c.a.createElement(S.a,{exact:!0,path:"/:direction/:flightId",component:le}))),c.a.createElement(se,null))},fe=Object(E.createStore)(g,Object(T.composeWithDevTools)(Object(E.applyMiddleware)(N.a)));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(D.a,{store:fe},c.a.createElement(I.a,null,c.a.createElement(oe,null)))),document.getElementById("root"))},79:function(e,t,a){e.exports=a(157)},88:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},96:function(e,t,a){}},[[79,1,2]]]);
//# sourceMappingURL=main.466137ee.chunk.js.map